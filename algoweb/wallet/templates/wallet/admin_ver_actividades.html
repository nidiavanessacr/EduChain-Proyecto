{% extends "wallet/base.html" %}
{% block title %}Actividades creadas y asignadas{% endblock %}

{% block content %}

<style>
    .container {
        width: 90%;
        max-width: 1100px;
        margin: auto;
        padding: 25px;
        background: #fff;
        border-radius: 15px;
        box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }

    h2 {
        text-align: center;
        color: #007bb5;
        margin-bottom: 25px;
        font-size: 28px;
    }

    .search-bar {
        width: 60%;
        margin: 0 auto 25px;
        padding: 12px;
        border-radius: 10px;
        border: 1px solid #bbb;
        font-size: 16px;
    }

    .grid {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 25px;
    }

    .card {
        width: 300px;
        background: #f9f9f9;
        border-radius: 15px;
        padding: 25px;
        text-align: center;
        box-shadow: 0 4px 10px rgba(0,0,0,0.15);
        transition: 0.2s ease;
    }

    .card:hover {
        transform: translateY(-6px);
        box-shadow: 0 8px 18px rgba(0,0,0,0.25);
    }

    .emoji {
        font-size: 55px;
        margin-bottom: 10px;
    }

    .card h3 {
        color: #007bb5;
        font-size: 22px;
        margin-bottom: 8px;
    }

    .label {
        font-weight: bold;
        color: #333;
        margin-top: 10px;
    }

    .value {
        color: #555;
        margin-bottom: 8px;
    }

    .btn {
        display: block;
        padding: 10px;
        margin-top: 10px;
        border-radius: 8px;
        font-weight: bold;
        text-decoration: none;
        color: white;
    }

    .btn-edit { background: #00a3e0; }
    .btn-delete { background: #ff4747; }
    .btn-status { background: #0085ba; }

</style>

<div class="container">

    <h2>üìã Actividades creadas y asignadas</h2>

    <input type="text" id="searchInput" class="search-bar"
           placeholder="Buscar por t√≠tulo o docente...">

    <div class="grid" id="activityGrid">

        {% for actividad in actividades %}
        <div class="card activity-card"
             data-name="{{ actividad.titulo }} {{ actividad.docente.username }}">

            <div class="emoji">üìù</div>

            <h3>{{ actividad.titulo }}</h3>

            <div class="label">Descripci√≥n:</div>
            <div class="value">{{ actividad.descripcion }}</div>

            <div class="label">Fecha de entrega:</div>
            <div class="value">
                {% if actividad.fecha_entrega %}
                    {{ actividad.fecha_entrega|date:"d \\d\\e F \\d\\e Y" }}
                {% else %}
                    No definida
                {% endif %}
            </div>

            <div class="label">Recompensa:</div>
            <div class="value">{{ actividad.recompensa }} ALGOs</div>

            <div class="label">Docente asignado:</div>
            <div class="value">
                {% if actividad.docente %}
                    {{ actividad.docente.username }}
                {% else %}
                    Sin asignar
                {% endif %}
            </div>

            <a href="{% url 'admin_editar_actividad' actividad.id %}" class="btn btn-edit">‚úè Editar</a>

            <a href="{% url 'admin_eliminar_actividad' actividad.id %}"
               class="btn btn-delete"
               onclick="return confirm('¬øEliminar esta actividad?');">
               üóë Eliminar
            </a>

        </div>
        {% empty %}
        <p style="text-align:center; margin-top:20px; font-size:18px;">
            No hay actividades creadas.
        </p>
        {% endfor %}

    </div>
</div>

<script>
    const input = document.getElementById("searchInput");
    const cards = document.querySelectorAll(".activity-card");

    input.addEventListener("keyup", () => {
        const term = input.value.toLowerCase();
        cards.forEach(card => {
            const keywords = card.dataset.name.toLowerCase();
            card.style.display = keywords.includes(term) ? "block" : "none";
        });
    });
</script>

{% endblock %}
